题
🍎小白也能搭CPU！3小时手搓addi指令数据通路，Logisim全流程图解｜硬核果子老师亲授

正文
今天分享一个我在实验室熬夜肝出来的「CPU addi指令数据通路」全流程，跟着果子老师 4 步思路，3 小时就能在 Logisim-Evolution 3.8 里跑通第一条自己搭的指令！零基础也能一次成功，姐妹们冲！

🌟 为什么从 addi 开始？

- 只有 I-type，字段少，不易翻车
- 不用管 rs2、Branch、Mem，逻辑最干净
- 一旦跑通，后面 lw/sw/beq 都是 copy-paste 级难度

🔧 4 步思考模板（背下来直接套）
1️⃣ 指令长啥？
31:20 = imm[11:0]
19:15 = rs1
14:12 = funct3（addi=000）
11:7  = rd
6:0   = opcode = 0010011

2️⃣ ALU 吃啥？
A ← 寄存器堆 ReadData1
B ← 立即数生成器输出
ALUSel = 0000（硬编码加法）

3️⃣ 要不要访存？
addi 不碰 DMEM，直接跳过！

4️⃣ 写回哪？
ALUResult → 寄存器堆 WriteData
RegWEn = 1（常高，一定写回）

🛠️ Logisim 实操要点

- Splitter 神器：1 根 32-bit 线进去，5 根字段线出来，秒拆指令
- 立即数生成器：复制果子老师上期模块，直接拖进来，sign-extend 12→32
- 寄存器堆：记得把 Clock 接上去，不然仿真不动！
- 接线顺序：Instruction → Splitter → RegFile/ImmGen → ALU → RegFile，形成闭环

🎉 成功标志
点击时钟，PC+4，rd 立即数+rs1 结果正确写回，寄存器窗口数值秒变，那一刻直接尖叫！

📌 下一步预告
addi 跑通 → 复制一份改 ALUSel 就能做 ori；再加个 DMEM 就能做 lw/sw；把 PCSel+Branch 逻辑加上就能做 beq。果子老师说：一步步搭，比一口气全写爽 100 倍！

⚠️ 避坑提醒
× 忘记接 Clock → 寄存器不更新
× Splitter 位宽填错 → 字段全乱
× ALU 端口接反 → 结果全 0

🧩 资源包
需要「addi 完整 .circ 源文件＋字段图解高清 PNG」的姐妹，评论区打【addi】，我统一发网盘链接，免积分！

\#CPU自制 #Logisim教程 #addi指令 #数据通路 #果子老师 #计算机组成原理 #工科女生 #技术小红书 #硬核干货 #小白也能懂