## 数据分析常用内置库基础用法精选（`math`, `sys`, `os`, `pickle`, `datetime`）

## 1) `math`：数学计算常用函数

适合做数值运算、概率计算、对数/指数处理。

```
import math

# 开方、幂、对数
print(math.sqrt(25))        # 5.0
print(math.pow(2, 3))       # 8.0
print(math.log(100, 10))    # 2.0

# 三角函数（常用于信号分析/周期数据）
angle = math.radians(30)    # 角度转弧度
print(math.sin(angle))      # 0.5

# 特殊常数
print(math.pi, math.e)      # 3.14159...  2.71828...
```

**要点**：

- `math.log` 可做对数变换，常用于归一化。
- `math.radians` / `math.degrees` 便于角度 ↔ 弧度转换。

------

## 2) `sys`：Python 环境与运行参数

在数据处理脚本中常用于路径、参数、环境控制。

```
import sys

# 查看 Python 版本
print(sys.version)

# 命令行参数（用于批处理）
# 假设执行 python script.py data.csv
print(sys.argv)   # ['script.py', 'data.csv']

# 修改递归深度限制（深度计算时常用）
sys.setrecursionlimit(2000)
```

**要点**：

- `sys.argv` 便于在数据分析 pipeline 中传入文件名。
- `sys.version` 检查环境兼容性。

------

## 3) `os`：文件系统与环境变量

数据读取/批量文件处理必用。

```
import os

# 获取当前路径
print(os.getcwd())

# 遍历文件夹下的文件
for f in os.listdir('.'):
    print(f)

# 路径拼接与分解
path = os.path.join("data", "sales.csv")
print(os.path.basename(path))  # sales.csv
print(os.path.dirname(path))   # data

# 环境变量（如读取数据库密码）
os.environ["API_KEY"] = "123456"
print(os.environ.get("API_KEY"))
```

**要点**：

- `os.listdir` 适合批量读取数据文件。
- `os.path.join` 可避免不同操作系统路径分隔符问题。

------

## 4) `pickle`：对象序列化存取

适合保存模型、预处理结果，避免重复计算。

```
import pickle

data = {"name": "Alice", "scores": [95, 88, 76]}

# 保存对象
with open("data.pkl", "wb") as f:
    pickle.dump(data, f)

# 读取对象
with open("data.pkl", "rb") as f:
    loaded = pickle.load(f)

print(loaded)
```

**要点**：

- `.pkl` 格式常用于临时缓存分析结果或模型。
- 注意安全：`pickle.load` 只适合加载可信文件。

------

## 5) `datetime`：时间处理与格式化

数据分析常用来处理时间戳、计算日期差。

```
from datetime import datetime, timedelta

# 当前时间
now = datetime.now()
print(now.strftime("%Y-%m-%d %H:%M:%S"))

# 字符串转时间
dt = datetime.strptime("2025-08-31", "%Y-%m-%d")
print(dt)

# 日期运算（常用于时间序列）
yesterday = now - timedelta(days=1)
next_week = now + timedelta(weeks=1)
print(yesterday, next_week)

# 时间差
delta = now - dt
print(delta.days)  # 相差天数
```

**要点**：

- `strftime` / `strptime` 用于时间 ↔ 字符串转换。
- `timedelta` 方便做时间窗口滑动。